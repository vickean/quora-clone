<%current_question%>
<%current_user%>

<div>
  <h1><a href="/">SharQ</a></h1>
  <h3>Answers. Fast!</h3>
</div>

<% if logged_in? %>
  <div>
    <h2><%= @current_user.username %></h2>
  </div>
<% end %>

<div>
  <h2><%= @current_question.question_title %></h2>
  <h3>Asked by <%= User.find(@current_question.user_id).username %></h3>
  <p>
    <%= @current_question.question_desc %>
  </p>
  <hr>
</div>

<div>
  <div>
    <form action=/ method=get>
    	<input id="to_index_button" type="submit" value="back to Main Page">
    </form>
  </div>

  <% if logged_in? %>
    <% if @current_user.id == @current_question.user_id %>
    <div>
      <form action="/user/<%= @current_user.id %>/questions/<%= @current_question.id %>/edit" method=get>
      	<input id="to_question_edit_button" type="submit" value="Edit Question">
      </form>
    </div>
    <div>
      <form action="/user/<%= @current_user.id %>/questions/<%= @current_question.id %>" method=post>
        <input name="_method" type="hidden" value="delete">
      	<input id="delete_question_button" type="submit" value="Delete Question">
      </form>
    </div>
    <div>
      <form action="/user/profile/<%= @current_user.id %>" method=get>
        <input id="logout_button" type="submit" value="Profile">
      </form>
    </div>
    <% end %>

    <div>
      <form action="/user/<%= @current_user.id %>/question/<%= @current_question.id %>/answer/new" method=get>
      	<input id="answer_button" type="submit" value="Answer this question!">
      </form>
    </div>

  <% else %>

    <div>
      <form action=/user/new method=get>
      	<input id="logout_button" type="submit" value="Sign In/Sign Up">
      </form>
    </div>

  <% end %>
</div>

<div>
  <hr>
  <table align="left">
    <tr>
      <th><h2>Answer(s)</h2></th>
    </tr>
	  <col width="600">

    <% #answer_list = Answer.where(question_id: @current_question.id).order(updated_at: :desc).limit(20) %>
    <% answer_list = @current_question.answers.order(updated_at: :desc).limit(20) %>
â€‹
   <% if answer_list %>
       <% answer_list.each do |x| %>
	      <tr>
	         <td>
             <hr>
             <h3><%= User.find(x.user_id).username %></h3>
             <p><%= x.answer_content %></p>
             <% if logged_in? %>
               <% if @current_user.id == x.user_id%>
               <form action="/user/<%= @current_user.id %>/question/<%= @current_question.id %>/answer/<%= x.id %>/edit" method=get>
               	<input id="edit_answer_button" type="submit" value="Edit Answer">
               </form>
               <form action="/user/<%= @current_user.id %>/questions/<%= @current_question.id %>/answers/<%= x.id %>" method=post>
                 <input name="_method" type="hidden" value="delete">
               	<input id="delete_answer_button" type="submit" value="Delete Answer">
               </form>
               <% end %>
              <% end %>
             <p></p>
           </td>
				</tr>
	     <%end%>
	    <%end%>
	</table>
</div>
